<!DOCTYPE html>

<html lang = 'en'>

    <%- include('./partials/head.ejs') %> <!-- Includes HTML Configurations -->
    <%- include('./partials/login.ejs') %> <!-- Includes Login popup -->

    <body>

        <%- include('./partials/nav.ejs') %> <!-- Includes navigation -->
        <%- include('./partials/search-bar.ejs') %> <!-- Includes search bar -->

        <div id = 'register' class = 'dark-shadow'>

            <h1>Register</h1>

            <form id = 'register-form' action = '/register' method = 'POST'>

                <label class = 'hidden-label' for = 'firstname'>First Name</label>
                <% if (typeof data != 'undefined') { %>
                    <input class = 'form-input' type = 'text' id = 'firstname' name = 'name' value = <%= data.info.name%>>
                <% } else { %>
                    <input class = 'form-input' type = 'text' id = 'firstname' name = 'name'>
                <% } %>

                <% if (typeof data != 'undefined') { %>
                    <% const errors = data.errors; %>

                    <% if (errors.name) { %>
                        <p class = 'under-error'><%= errors.name.msg %></p>
                    <% } else { %>
                        <p class = 'under-error'></p>
                    <% } %>
                <% } else { %>
                    <p class = 'under-error'></p>
                <% } %>


                <label class = 'hidden-label' for = 'lastname'>Last Name</label>
                <% if (typeof data != 'undefined') { %>
                    <input class = 'form-input' type = 'text' id = 'lastname' name = 'lastname' value = <%= data.info.lastname%>>
                <% } else { %>
                    <input class = 'form-input' type = 'text' id = 'lastname' name = 'lastname'>
                <% } %>

                <% if (typeof data != 'undefined') { %>
                    <% const errors = data.errors; %>

                    <% if (errors.lastname) { %>
                        <p class = 'under-error'><%= errors.lastname.msg %></p>
                    <% } else { %>
                        <p class = 'under-error'></p>
                    <% } %>
                <% } else { %>
                    <p class = 'under-error'></p>
                <% } %>


                <label class = 'hidden-label' for = 'birthdate'>Date of Birth</label>
                <div id = 'birthdate'>
                    <input class = 'form-input' type = 'number' id = 'day' name = 'day' min = 1 max = 31 placeholder = 'day'>
                    <input class = 'form-input' type = 'number' id = 'month' name = 'month' min = 1 max = 12 placeholder = 'month'>
                    <input class = 'form-input' type = 'number' id = 'year' name = 'year' min = 1900 max = 2008 placeholder = 'year'>
                </div>

                <% if (typeof data != 'undefined') { %>
                    <% const errors = data.errors; %>

                    <% if (errors.day) { %>
                        <p class = 'under-error'><%= errors.day.msg %></p>
                    <% } else { %>
                        <p class = 'under-error'></p>
                    <% } %>
                <% } else { %>
                    <p class = 'under-error'></p>
                <% } %>


                <div id = 'genders'>
                    <label for = 'female'>Female</label>
                    <input class = 'form-input' type = 'radio' id = 'female' name = 'gender' value = 'female'>

                    <label for = 'male'>Male</label>
                    <input class = 'form-input' type = 'radio' id = 'male' name = 'gender' value = 'male'>
                </div>

                <% if (typeof data != 'undefined') { %>
                    <% const errors = data.errors; %>

                    <% if (errors.gender) { %>
                        <p class = 'under-error'><%= errors.gender.msg %></p>
                    <% } else { %>
                        <p class = 'under-error'></p>
                    <% } %>
                <% } else { %>
                    <p class = 'under-error'></p>
                <% } %>


                <label class = 'hidden-label' for = 'email'>Email</label>
                <% if (typeof data != 'undefined') { %>
                    <input class = 'form-input' type = 'email' id = 'email' name = 'email' value = <%= data.info.email%>>
                <% } else { %>
                    <input class = 'form-input' type = 'email' id = 'email' name = 'email'>
                <% } %>

                <% if (typeof data != 'undefined') { %>
                    <% const errors = data.errors; %>

                    <% if (errors.email) { %>
                        <p class = 'under-error'><%= errors.email.msg %></p>
                    <% } else { %>
                        <p class = 'under-error'></p>
                    <% } %>
                <% } else { %>
                    <p class = 'under-error'></p>
                <% } %>
                

                <label class = 'hidden-label' for = 'password'>Password</label>
                <input class = 'form-input' type = 'password' id = 'password' name = 'password'>

                <% if (typeof data != 'undefined') { %>
                    <% const errors = data.errors; %>

                    <% if (errors.password) { %>
                        <p class = 'under-error'><%= errors.password.msg %></p>
                    <% } else { %>
                        <p class = 'under-error'></p>
                    <% } %>
                <% } else { %>
                    <p class = 'under-error'></p>
                <% } %>


                <label class = 'hidden-label' for = 'confirmation'>Repeat Password</label>
                <input class = 'form-input' type = 'password' id = 'confirmation' name = 'confirmation'>

                <% if (typeof data != 'undefined') { %>
                    <% const errors = data.errors; %>

                    <% if (errors.confirmation) { %>
                        <p class = 'under-error'><%= errors.confirmation.msg %></p>
                    <% } else { %>
                        <p class = 'under-error'></p>
                    <% } %>
                <% } else { %>
                    <p class = 'under-error'></p>
                <% } %>


                <label class = 'register-label'>First Name</label>
                <label class = 'register-label'>Last Name</label>
                <label class = 'register-label'>Date of Birth</label>
                <label class = 'register-label' id = 'email-label'>Email</label>
                <label class = 'register-label'>Password</label>
                <label class = 'register-label'>Repeat Password</label>

                <% if (typeof data != 'undefined') { %>
                    <% const errors = data.errors; %>
                    <% const inputs = data.inputs; %>

                    <% for (const [key, value] of Object.entries(inputs)) { %>
                        <% if (errors[key]) { %>
                            <label class = 'error-msg'><%= errors[key].msg %></label>
                        <% } else { %>
                            <label class = 'error-msg'></label>
                        <% } %>
                    <% } %>
                <% } %>

                <input class = 'button' type = 'submit' value = 'Submit'>
                <p class = 'prompt'>Already have an account? <a href = '/'>Log in</a></p>

            </form>
        </div>

        <%- include('./partials/footer.ejs') %> <!-- Includes footer -->

    </body>
</html>